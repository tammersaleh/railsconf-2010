<% @page_title = "Articles" %>

<h1>Articles</h1>

<div class="main with_sidebar">
  <% form_tag articles_path, { :class => "search", :method => :get } do %>
    <%= label_tag "state" %>
    <%= select_tag "state", "<option></option>"+options_from_collection_for_select(State.all, 'id', 'name') %>
    <%= label_tag "category" %>
    <%= select_tag "category", "<option></option>"+options_from_collection_for_select(Category.all, 'id', 'name') %>
    <%= submit_tag 'Go' %>
  <% end %>

  <table>
    <tr>
      <th>Title</th>
      <th>Body</th>
      <th>State</th>
      <th>Category</th>
      <th colspan="3"></th>
    </tr>

    <% @articles.each do |article| %>
      <tr>
        <td><%=h article.title %></td>
        <td><%=h article.body %></td>
        <td><%=h article.state.name %></td>
        <td><%=h article.category.name %></td>
        <td class="action"><%= link_to 'View', article %></td>
        <td class="action"><%= link_to 'Edit', edit_article_path(article), :class => "yellow" %></td>
        <td class="action"><%= link_to 'Destroy', article, :confirm => 'Are you sure?', :method => :delete, :class => "red" %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class="sidebar">
  <%= link_to 'New article', new_article_path, :class => "blue" %>
</div>
